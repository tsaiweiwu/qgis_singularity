Bootstrap: docker
From: ubuntu:16.04


%setup
    echo ${PWD}

    mkdir -p /depot 
    mkdir -p /scratch

%files
    Cesium-1.56.1.zip

%post


    apt-get -y update
    apt-get -y upgrade
    apt-get install -y software-properties-common
    apt-get install -y g++
    apt-get install -y vim git wget cmake
    apt-get install -y unzip zip curl
    apt-get install -y apache2 libapache2-mod-fcgid


    ## add cesium
    curl -sL https://deb.nodesource.com/setup_8.x | bash -    
    apt-get install -y nodejs    
    unzip -o /Cesium-1.56.1.zip -d /var/www/html
    cd /var/www/html
    npm install
    

    ## add ubuntugis repo
    echo >> /etc/apt/sources.list
    echo "## ubuntuGIS" >> /etc/apt/sources.list
    echo "## https://launchpad.net/~ubuntugis/+archive/ubuntu/ppa" >> /etc/apt/sources.list
    echo "deb http://ppa.launchpad.net/ubuntugis/ppa/ubuntu xenial main" >> /etc/apt/sources.list
    echo "deb-src http://ppa.launchpad.net/ubuntugis/ppa/ubuntu xenial main" >> /etc/apt/sources.list

    add-apt-repository ppa:ubuntugis/ppa -y
    apt-get update
    apt-get install -y qgis qgis-server python-qgis




